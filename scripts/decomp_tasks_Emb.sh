#!/bin/bash

TARGET_FOLDER="/mnt/share/aist-aloha/train/004_8videos_grid/"

TASK_LIST=(
    "peel_film"
    "usb_rightarm"
    "bluebox_right_left"
    "peel_ducttape"
    "pull_rubberband"
    "usb_leftarm"
    "gear_task_01_washer_len700"
    "gear_task_02_gear_len500"
    "gear_task_03_gear_len700"
    "gear_task_04_washer_len700"
    "insert_usb_cable"
    "insert_usb_cable_fix_parts"
    "insert_usb_cable_fixed_by_robot"
    "usb_plugin_pcbox"
    "gear_task_001_01"
    "gear_task_001_02"
    "gear_task_002_01"
    "gear_task_002_02"
    "gear_task_003_01"
    "gear_task_003_02"
    "gear_task_004_01"
    "gear_task_004_02"
    "cable_routing_8pin_cross"
    "cable_routing_cross_narrow"
    "usb_mark_001"
    "usb_mark_002"
    "usb_mark_003"
    "cable_routing_ring_deliver"
    "cable_routing_ring_deliver_far"
    "cable_routing_ring_deliver_near"
    "insert_wooden_stake"
    "move_board_insert_wooden_stake"
    "move_board_insert_wooden_stake_offset"
    "wire_one_hole_pass"
    "wire_one_hole_pass_red"
    "insert_usb_cable_board"
    "put_cup_in_cupholder_001"
    "put_cup_in_cupholder_002"
    "put_cup_in_cupholder_003"
    "put_cup_in_cupholder_004"
    "put_tape_in_basket"
    "put_center_tape_in_basket"
    "wire_one_hole_pass_red_3cm_left"
    "wire_one_hole_pass_red_3cm_right"
    "wire_one_hole_pass_red_retake"
    "color_tape_grab_and_insert"
    "color_tape_grab_and_insert_left_hand"
    "color_tape_grab_and_insert_right_hand"
    "goods_grab_and_insert"
    "goods_grab_and_insert_left_hand"
    "goods_grab_and_insert_right_hand"
    "insert_washer_into_the_shaft_001"
    "insert_washer_into_the_shaft_002"
    "insert_usb_into_the_three_rings_002"
    "silver_pouch_001"
    "silver_pouch_002"
    "silver_pouch_003"
    "silver_pouch_004"
    "clear_zipper_bag_001"
    "clear_zipper_bag_reel_001"
    "clear_zipper_bag_reel_002"
    "receive_goods_and_add_to_basket"
    "receive_another_goods_and_add_to_basket"
    "receive_goods_and_add_to_basket_in_center"
    "peel_off_magic_tape"
    "remove_the_tape"
    "sliding_the_gears"
    "insert_gear_onto_shaft_sliding"
    "tape_fixed_in_place"
    "tape_placed_in_random_places"
    "tape_placed_in_random_places_long"
    "insert_usb_into_the_three_rings_003"
    "lift_the_object_with_both_hands_001"
    "lift_the_object_with_both_hands_002"
    "lift_the_object_with_both_hands_003"
    "lift_the_object_with_both_hands_004"
    "lift_the_object_with_both_hands_005_01"
    "lift_the_object_with_both_hands_005_02"
    "lift_the_object_with_both_hands_006"
    "lift_the_object_with_both_hands_007"
    "insert_lan_cable_into_the_hub"
    "pick_items_out_of_the_box_001"
    "pick_items_out_of_the_box_002"
    "pick_items_out_of_the_box_003"
    "pick_items_out_of_the_box_004"
    "pick_items_out_of_the_box_005"
    "display_boxes_on_shelves_001"
    "display_boxes_on_shelves_002"
    "display_PET_bottles_on_shelves_001"
    "display_PET_bottles_on_shelves_002"
    "display_cans_on_shelves_001"
    "display_cans_on_shelves_002"
    "display_cans_on_shelves_003"
    "display_cans_on_shelves_004"
    "block_delivery"
    "take_the_lid"
    "remove_box_from_case"
    "remove_box_from_case_both_hands"
    "remove_box_from_case_left"
    "remove_box_from_case_right"
    "lift_by_gripping_from_both_sides_001"
    "lift_by_gripping_from_both_sides_002"
    "lift_by_gripping_from_both_sides_003"
    "pick_the_bisco_out_of_the_box"
    "place_the_bisco_into_the_box"
    "lift_with_both_arms_and_display_on_the_shelf_001"
    "lift_with_both_arms_and_display_on_the_shelf_002"
    "lift_with_both_arms_and_display_on_the_shelf_003"
    "attach_rubber_to_shaft"
    "insert_shaft_into_gear"
    "find_hole_and_insert_into_gear"
    "pick_the_candy_out_of_the_box"
    "place_the_candy_out_of_the_box"
    "pick_the_calpas_out_of_the_box"
    "place_the_calpas_into_the_box"
    "pick_the_gum_out_of_the_box"
    "place_the_gum_into_the_box"
    "pick_the_soyjoy_out_of_the_box"
    "place_the_soyjoy_into_the_box"
    "pick_the_big_thunder_out_of_the_box"
    "place_the_big_thunder_out_of_the_box"
    "pick_the_D_battery_out_of_the_box"
    "place_the_D_battery_out_of_the_box"
    "put_ionwater_on_the_shelf"
    "put_toropicana_on_the_shelf"
    "put_healthia_on_the_shelf"
    "put_irophasu_on_the_shelf"
    "put_cocacola_on_the_shelf"
    "put_monster_on_the_shelf"
    "put_monsterzero_on_the_shelf"
    "put_redbull_on_the_shelf"
    "put_wonda_on_the_shelf"
    "put_bossrainbow_on_the_shelf"
    "put_D_battery_on_the_shelf"
    "put_bisco_on_the_shelf"
    "put_soyjoy_on_the_shelf"
    "put_gum_on_the_shelf"
    "put_calpas_on_the_shelf"
    "put_candy_on_the_shelf"
    "pick_and_place_R_NONIO"
    "pick_and_place_R_halls_candy"
    "pick_and_place_R_SOYJOY"
    "pick_and_place_R_hand_cream"
    "pick_and_place_R_VC3000"
    "pick_and_place_R_jagarico_bits"
    "pick_and_place_R_aojiso"
    "pick_and_place_R_mondamin"
    "pick_and_place_R_bioreU"
    "pick_and_place_R_ramune"
    "pick_and_place_R_dentalfloss_pick"
    "pick_and_place_L_ponzu"
    "pick_and_place_L_samgetan"
    "pick_and_place_L_bioreU"
    "pick_and_place_L_tape"
    "pick_and_place_L_calorie_mate"
    "pick_and_place_L_umai_bo"
    "pick_and_place_L_kyukyutto"
    "insert_shaft_into_gear_middle_shaft_randam"
    "insert_shaft_into_gear_middle_gear_randam"
    "transfer_soyjoy_to_the_left_arm_and_box_it"
    "transfer_bisco_to_the_left_arm_and_box_it"
    "transfer_big_thunder_to_the_left_arm_and_box_it"
    "pick_and_place_L_jagarico_bits"
    "pick_and_place_L_VC3000"
    "pick_and_place_L_ramune"
    "insert_shaft_into_gear_small_shaft_randam"
    "insert_shaft_into_gear_small_gear_randam"
    "place_soldering_iron_on_marker"
    "unscrew_the_cap_of_the_plastic_bottle"
    "wipe_the_desk_with_an_orange_cloth"
    "wipe_the_desk_with_a_yellow_cloth"
    "wipe_the_desk_with_a_blue_cloth"
    "collect_the_screws_using_a_dustpan_01"
    "collect_the_screws_using_a_dustpan_02"
    "place_the_slippers"
    "place_soldering_iron_and_solder_on_marker"
    "hit_mark_with_hammer"
    "wipe_the_desk_with_a_sponge"
)

for t in "${TASK_LIST[@]}"; do
    dir="$TARGET_FOLDER$t"
    dir_name=$(basename "$dir")
    echo "Processing directory: $dir_name"

    output_dir="$SAVE_FOLDER/$dir_name"
    mkdir -p "$output_dir"

    python decompress_hdf5_TextEmb --dataset_dir "$dir" --output_dir "$output_dir" --nproc 5

    if [ $? -eq 0 ]; then
        echo "Data saved for $dir_name in $output_dir"
    else
        echo "Error processing $dir_name"
    fi
done

echo "All directories processed."